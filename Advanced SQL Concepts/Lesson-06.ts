=========================================================================================
                            DATABASE INDEXING EXPLAINED 
=========================================================================================

=========================================================================================
# 0. Index ‡¶ï‡ßÄ?
=========================================================================================
Index ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤‡ßã ‚Äî
üëâ **Database-‡¶è‡¶∞ ‡¶≠‡¶ø‡¶§‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶æ special data structure**
üëâ ‡¶Ø‡ßá‡¶ü‡¶æ **data ‡¶ñ‡ßã‡¶Å‡¶ú‡¶æ (SEARCH) ‡¶Ö‡¶®‡ßá‡¶ï fast ‡¶ï‡¶∞‡ßá**

‡¶è‡¶ï ‡¶ï‡¶•‡¶æ‡ßü ‚Äî
üëâ **Index = Book-‡¶è‡¶∞ index page ‡¶è‡¶∞ ‡¶Æ‡¶§‡ßã**
üëâ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶¨‡¶á ‡¶™‡ßú‡¶æ ‡¶≤‡¶æ‡¶ó‡ßá‡¶®‡¶æ, ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø page ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü

=========================================================================================
# 1. Index ‡¶ï‡ßá‡¶® ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?
=========================================================================================

‚ùå Index ‡¶õ‡¶æ‡ßú‡¶æ:
-------------
üëâ Database ‡¶™‡ßÅ‡¶∞‡ßã table scan ‡¶ï‡¶∞‡ßá (Sequential Scan)
üëâ ‡¶¨‡ßú table ‡¶π‡¶≤‡ßá query slow ‡¶π‡ßü

‚úî Index ‡¶•‡¶æ‡¶ï‡¶≤‡ßá:
--------------
üëâ Direct row locate ‡¶ï‡¶∞‡ßá
üëâ Query ‡¶Ö‡¶®‡ßá‡¶ï fast execute ‡¶π‡ßü

=========================================================================================
# 2. Index ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá?
=========================================================================================
Most database (PostgreSQL) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‚Äî

üëâ **B-Tree Index (Balanced Tree)**

Flow:
-----
1Ô∏è‚É£ Index column sort ‡¶ï‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡ßá  
2Ô∏è‚É£ Tree structure ‡¶è data ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü  
3Ô∏è‚É£ Binary search ‡¶è‡¶∞ ‡¶Æ‡¶§‡ßã lookup ‡¶π‡ßü  
4Ô∏è‚É£ Result ‡¶ñ‡ßÅ‡¶¨ ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü  

=========================================================================================
# 3. Index ‡¶ï‡ßã‡¶•‡¶æ‡ßü ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶ï‡¶æ‡¶ú‡ßá ‡¶≤‡¶æ‡¶ó‡ßá?
=========================================================================================

‚úî WHERE clause  
‚úî JOIN condition  
‚úî ORDER BY  
‚úî GROUP BY  
‚úî Foreign Key column  

=========================================================================================
# 4. Index ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ Syntax
=========================================================================================

CREATE INDEX index_name
ON table_name(column_name);

Example:
--------
CREATE INDEX idx_employee_salary
ON employees(salary);

‚úî salary column ‡¶è index ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶≤‡ßã

=========================================================================================
# 5. Unique Index
=========================================================================================
üëâ Duplicate value allow ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ

Syntax:
-------
CREATE UNIQUE INDEX index_name
ON table_name(column_name);

Example:
--------
CREATE UNIQUE INDEX idx_users_email
ON users(email);

‚úî ‡¶è‡¶ï‡¶á email ‡¶Ü‡¶∞ insert ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ

=========================================================================================
# 6. Composite Index (Multiple Column)
=========================================================================================
üëâ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï column ‡¶®‡¶ø‡ßü‡ßá index

Syntax:
-------
CREATE INDEX index_name
ON table_name(column1, column2);

Example:
--------
CREATE INDEX idx_emp_dept_salary
ON employees(department_id, salary);

‚úî department + salary ‡¶¶‡¶ø‡ßü‡ßá search fast ‡¶π‡¶¨‡ßá

‚ö† Order matters:
----------------
(department_id, salary) ‚â† (salary, department_id)

=========================================================================================
# 7. When Index WILL be Used
=========================================================================================

SELECT * FROM employees WHERE salary = 50000;
SELECT * FROM employees WHERE department_id = 3;
SELECT * FROM employees ORDER BY salary;

‚úî Index effective

=========================================================================================
# 8. When Index WILL NOT be Used
=========================================================================================

‚ùå Function ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá:
-------------------------
SELECT * FROM employees WHERE LOWER(name) = 'rahim';

‚ùå Leading wildcard LIKE:
-------------------------
SELECT * FROM employees WHERE name LIKE '%im';

‚ùå Small table:
---------------
üëâ PostgreSQL ‡¶®‡¶ø‡¶ú‡ßá‡¶á sequential scan prefer ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá

=========================================================================================
# 9. Index Types (PostgreSQL)
=========================================================================================

-----------------------------------------------------------------------------------------
# 9.1 B-Tree Index (Default)
-----------------------------------------------------------------------------------------
‚úî Most common  
‚úî =, <, >, BETWEEN, ORDER BY  

-----------------------------------------------------------------------------------------
# 9.2 Hash Index
-----------------------------------------------------------------------------------------
‚úî Only equality (=)  
‚ùå Range query support ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ  

-----------------------------------------------------------------------------------------
# 9.3 GIN Index
-----------------------------------------------------------------------------------------
‚úî Array  
‚úî JSONB  
‚úî Full-text search  

Example:
--------
CREATE INDEX idx_tags_gin
ON products USING GIN(tags);

-----------------------------------------------------------------------------------------
# 9.4 BRIN Index
-----------------------------------------------------------------------------------------
‚úî Very large table  
‚úî Sequential data (date, time)  
‚úî Low storage cost  

=========================================================================================
# 10. Index Cost (Disadvantages)
=========================================================================================

‚ùå INSERT slow  
‚ùå UPDATE slow  
‚ùå DELETE slow  
‚ùå Extra storage ‡¶≤‡¶æ‡¶ó‡ßá  

üëâ ‡¶ï‡¶æ‡¶∞‡¶£:
---------
Index-‡¶ì update ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü

=========================================================================================
# 11. Index vs Primary Key
=========================================================================================

Primary Key:
------------
‚úî Automatically index ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü  
‚úî Unique + Not Null  

Normal Index:
-------------
‚úî Optional  
‚úî Unique ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶¨‡¶æ ‡¶®‡¶æ‡¶ì ‡¶™‡¶æ‡¶∞‡ßá  

=========================================================================================
# 12. How to Check Index Usage
=========================================================================================
üëâ PostgreSQL ‡¶è query plan ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø

EXPLAIN ANALYZE
SELECT * FROM employees WHERE salary > 60000;

‚úî Index Scan ‡¶¶‡ßá‡¶ñ‡¶æ‡¶≤‡ßá index use ‡¶π‡ßü‡ßá‡¶õ‡ßá  
‚úî Seq Scan ‡¶¶‡ßá‡¶ñ‡¶æ‡¶≤‡ßá index use ‡¶π‡ßü‡¶®‡¶ø  

=========================================================================================
# 13. Best Practices
=========================================================================================

‚úî Frequently searched column ‡¶è index ‡¶¶‡¶æ‡¶ì  
‚úî Foreign key column ‡¶è index ‡¶∞‡¶æ‡¶ñ‡ßã  
‚úî Over-index ‡¶ï‡¶∞‡ßã ‡¶®‡¶æ  
‚úî Function-based condition avoid ‡¶ï‡¶∞‡ßã  
‚úî Real query ‡¶¶‡ßá‡¶ñ‡ßá index design ‡¶ï‡¶∞‡ßã  

=========================================================================================
# 14. Cheat Sheet Summary
=========================================================================================

‚úî Index = Faster search  
‚úî B-Tree = Default index  
‚úî Composite index ‚Üí column order important  
‚úî Too many index = slow write  
‚úî EXPLAIN ANALYZE = performance check  

=========================================================================================
                             THE END
=========================================================================================
