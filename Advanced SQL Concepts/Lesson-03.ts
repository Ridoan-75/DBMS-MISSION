=========================================================================================
                        STORED PROCEDURE ‚Äî EXAMPLE 1 
=========================================================================================

=========================================================================================
# 0. Stored Procedure ‡¶ï‡ßÄ?
=========================================================================================
Stored Procedure ‡¶π‡¶≤‡ßã ‚Äî
üëâ **Database-‡¶è save ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶è‡¶ï‡¶ó‡ßÅ‡¶ö‡ßç‡¶õ SQL statement**
üëâ ‡¶Ø‡ßá‡¶ü‡¶æ ‡¶¨‡¶æ‡¶∞‡¶¨‡¶æ‡¶∞ call ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü
üëâ Business logic database level-‡¶è handle ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü

‡¶è‡¶ï ‡¶ï‡¶•‡¶æ‡ßü ‚Äî
üëâ **Reusable SQL Program**

=========================================================================================
# 1. Stored Procedure ‡¶ï‡ßá‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßã?
=========================================================================================

‚úî ‡¶¨‡¶æ‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶è‡¶ï‡¶á query ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶π‡ßü ‡¶®‡¶æ  
‚úî Code reuse ‡¶π‡ßü  
‚úî Performance ‡¶≠‡¶æ‡¶≤‡ßã ‡¶π‡ßü  
‚úî Security ‡¶¨‡¶æ‡ßú‡ßá (direct table access ‡¶ï‡¶Æ‡ßá)  
‚úî Complex logic ‡¶∏‡¶π‡¶ú ‡¶π‡ßü  

=========================================================================================
# 2. Example Scenario
=========================================================================================

‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø table ‡¶Ü‡¶õ‡ßá ‚Äî

employees
---------
id  
name  
department  
salary  

Goal:
üëâ ‡¶è‡¶Æ‡¶® ‡¶è‡¶ï‡¶ü‡¶æ procedure ‡¶¨‡¶æ‡¶®‡¶æ‡¶¨‡ßã  
üëâ ‡¶Ø‡ßá‡¶ü‡¶æ **‡¶è‡¶ï‡¶ü‡¶æ salary input ‡¶®‡ßá‡¶¨‡ßá**  
üëâ ‡¶è‡¶¨‡¶Ç **‡¶è‡¶á salary-‡¶è‡¶∞ ‡¶ö‡ßá‡ßü‡ßá ‡¶¨‡ßá‡¶∂‡¶ø salary ‡¶™‡¶æ‡¶ì‡ßü‡¶æ employee ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá**

=========================================================================================
# 3. Basic Stored Procedure Syntax (PostgreSQL)
=========================================================================================

CREATE OR REPLACE PROCEDURE procedure_name(parameter datatype)
LANGUAGE plpgsql
AS $$
BEGIN
    SQL statements;
END;
$$;

=========================================================================================
# 4. Procedure Example 1 ‚Äî Salary Filter
=========================================================================================

-----------------------------------------------------------------------------------------
# 4.1 Procedure ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
-----------------------------------------------------------------------------------------

CREATE OR REPLACE PROCEDURE get_employees_by_salary(
    min_salary NUMERIC
)
LANGUAGE plpgsql
AS $$
BEGIN
    SELECT id, name, department, salary
    FROM employees
    WHERE salary > min_salary;
END;
$$;

‚úî min_salary ‚Üí input parameter  
‚úî NUMERIC ‚Üí salary-‡¶è‡¶∞ datatype  
‚úî WHERE clause ‚Üí condition apply ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá  

=========================================================================================
# 5. Procedure Call ‡¶ï‡¶∞‡¶æ
=========================================================================================

CALL get_employees_by_salary(50000);

‚úî ‡¶è‡¶á call ‡¶ï‡¶∞‡¶≤‡ßá  
‚úî salary > 50000 ‡¶è‡¶Æ‡¶® ‡¶∏‡¶¨ employee ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá  

=========================================================================================
# 6. Procedure Execution Flow (Step-by-Step)
=========================================================================================

1Ô∏è‚É£ CALL statement execute ‡¶π‡ßü  
2Ô∏è‚É£ min_salary parameter value ‡¶®‡ßá‡ßü (50000)  
3Ô∏è‚É£ SELECT query execute ‡¶π‡ßü  
4Ô∏è‚É£ Filtered result return ‡¶ï‡¶∞‡ßá  

=========================================================================================
# 7. Procedure vs Function (Quick Note)
=========================================================================================

Procedure:
----------
‚úî CALL ‡¶¶‡¶ø‡ßü‡ßá execute  
‚úî Result return ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá SELECT ‡¶¶‡¶ø‡ßü‡ßá  
‚úî Transaction control ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ (COMMIT / ROLLBACK)

Function:
---------
‚úî SELECT ‡¶¶‡¶ø‡ßü‡ßá call  
‚úî ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á RETURN ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü  
‚úî Transaction control ‡¶®‡¶æ‡¶á  

=========================================================================================
# 8. Common Mistakes
=========================================================================================

‚ùå Procedure-‡¶è‡¶∞ ‡¶≠‡¶ø‡¶§‡¶∞‡ßá RETURN ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ  
‚ùå CALL ‡¶®‡¶æ ‡¶¶‡¶ø‡ßü‡ßá SELECT ‡¶¶‡¶ø‡ßü‡ßá execute ‡¶ï‡¶∞‡¶æ  
‚ùå Parameter datatype mismatch  
‚ùå plpgsql language ‡¶®‡¶æ ‡¶≤‡ßá‡¶ñ‡¶æ  

=========================================================================================
# 9. When to Use This Type of Procedure?
=========================================================================================

‚úî Report generation  
‚úî Filter-based search  
‚úî Admin operations  
‚úî Business rule enforcement  

=========================================================================================
# 10. Summary
=========================================================================================

‚úî Stored Procedure = Database Program  
‚úî Input parameter ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá  
‚úî Logic database-‡¶è execute ‡¶π‡ßü  
‚úî CALL ‡¶¶‡¶ø‡ßü‡ßá run ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü  
‚úî Reusable & efficient  

=========================================================================================
                                 THE END
=========================================================================================
