=========================================================================================
                                 FOREIGN KEY 
=========================================================================================

=========================================================================================
# 1. FOREIGN KEY ‡¶ï‡ßÄ?
=========================================================================================

Foreign Key ‡¶π‡¶≤‡ßã ‚Äî  
‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ ‡¶è‡¶Æ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø field/column ‡¶Ø‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ Primary Key ‡¶¨‡¶æ Unique Key-‡¶ï‡ßá reference ‡¶ï‡¶∞‡ßá‡•§

üëâ Simple Meaning:
‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ data ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ data-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßá  
‡¶§‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡ßá key ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü ‚Üí ‡¶∏‡ßá‡¶ü‡¶æ‡¶á Foreign Key‡•§

Database ‡¶è relation ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶π‡¶≤‡ßã Foreign Key‡•§


=========================================================================================
# 2. Foreign Key ‡¶ï‡ßá‡¶® ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®?
=========================================================================================

‚úî ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá relationship ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá  
‚úî Invalid ‡¶¨‡¶æ orphan data prevent ‡¶ï‡¶∞‡¶§‡ßá  
‚úî Data consistency ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶§‡ßá  
‚úî One-to-One, One-to-Many, Many-to-Many relationship ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶æ‡ßü‡¶® ‡¶ï‡¶∞‡¶§‡ßá  


=========================================================================================
# 3. Easy Real-Life Example
=========================================================================================

University System:

Table-1: Students  
PK = studentId

Table-2: Enrollments  
FK = studentId (‚Üí Students.studentId)

Enrollments ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ studentId ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á Students ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø valid studentId ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§  
‡¶§‡¶æ ‡¶®‡¶æ‡¶π‡¶≤‡ßá enrollment ‡¶Ö‡¶∞‡ßç‡¶•‡¶π‡ßÄ‡¶® ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§


=========================================================================================
# 4. Practical Example (Tables)
=========================================================================================

TABLE: Departments
--------------------------------------------
| deptId (PK) | deptName                  |
--------------------------------------------
| 10          | CSE                       |
| 20          | EEE                       |
| 30          | BBA                       |
--------------------------------------------

TABLE: Students
--------------------------------------------------------------
| studentId (PK) | fullName      | deptId (FK)                |
--------------------------------------------------------------
| 101            | Arafat         | 10                         |
| 102            | Riya           | 20                         |
| 103            | Tanvir         | 10                         |
| 104            | Sami           | 30                         |
--------------------------------------------------------------

Students.deptId ‚Üí references ‚Üí Departments.deptId

‚ú¶ deptId ‡¶è‡¶ñ‡¶æ‡¶®‡ßá Students ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá Foreign Key  
‚ú¶ ‡¶Ø‡ßá value Students table-‡¶è deptId ‡¶è ‡¶•‡¶æ‡¶ï‡¶¨‡ßá,  
  ‡¶∏‡ßá‡¶ü‡¶ø ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á Departments table ‡¶è deptId ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§


=========================================================================================
# 5. Foreign Key ‡¶è‡¶∞ Rule / Constraint
=========================================================================================

Foreign Key constraint database ‡¶ï‡ßá ‡¶¨‡¶≤‡ßá ‡¶¶‡ßá‡¶Ø‡¶º:

"‡¶è‡¶á column-‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á referenced table-‡¶è‡¶∞ primary key-‡¶∞ ‡¶Æ‡¶æ‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§"

‡¶è‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá:
‚úî ‡¶≠‡ßÅ‡¶≤ departmentId insert ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ  
‚úî student delete ‡¶ï‡¶∞‡¶≤‡ßá ‡¶§‡¶æ‡¶∞ enrollment handle ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá  
‚úî data integrity ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶¨‡¶ú‡¶æ‡ßü ‡¶•‡¶æ‡¶ï‡¶¨‡ßá  
*/

=========================================================================================
# 6. Foreign Key ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá (Behind The Scene)
=========================================================================================

‡¶ß‡¶∞‡ßã Students ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá deptId = 99 insert ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡¶≤‡¶æ‡¶Æ  
‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ Departments ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá deptId=99 ‡¶®‡ßá‡¶á‡•§

Database ‡¶¨‡¶≤‡¶¨‡ßá:
‚ùå ERROR: Cannot insert ‚Äî Foreign Key violation

‡¶ï‡¶æ‡¶∞‡¶£:
Students.deptId ‚Üí Departments.deptId ‡¶è match ‡¶π‡ßü‡¶®‡¶ø‡•§

‡¶è‡¶≠‡¶æ‡¶¨‡ßá‡¶á DB invalid data block ‡¶ï‡¶∞‡ßá‡•§

=========================================================================================
# 7. ON DELETE & ON UPDATE Rules 
=========================================================================================

Foreign Key ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶¶‡ßÅ‡¶á ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ rules ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü:

1. ON DELETE  
2. ON UPDATE  

‡¶è‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¨‡¶≤‡ßá‚Äîparent table-‡¶è data delete/update ‡¶π‡¶≤‡ßá  
child table-‡¶è‡¶∞ data ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá behave ‡¶ï‡¶∞‡¶¨‡ßá‡•§

Available options:
------------------------------------

1. CASCADE
    - Parent delete/update ‡¶π‡¶≤‡ßá child-‡¶è‡¶∞ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°‡¶ì auto delete/update ‡¶π‡¶¨‡ßá‡•§
    - Example: department delete ‡¶π‡¶≤‡ßá ‡¶∏‡ßá‡¶á department-‡¶è‡¶∞ ‡¶∏‡¶¨ student delete‡•§

2. SET NULL
    - Parent delete/update ‡¶π‡¶≤‡ßá child-‡¶è‡¶∞ FK value ‚Üí NULL ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶¨‡ßá‡•§

3. SET DEFAULT
    - FK value default value set ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶¨‡ßá‡•§

4. NO ACTION
    - ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶á ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ (‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ FK constraint break ‡¶π‡¶≤‡ßá error ‡¶¶‡ßá‡¶¨‡ßá)‡•§

5. RESTRICT
    - Parent delete/update ‡¶ï‡¶∞‡¶§‡ßá ‡¶¶‡ßá‡¶¨‡ßá ‡¶®‡¶æ  
      ‡¶Ø‡¶§‡¶ï‡ßç‡¶∑‡¶£ child table-‡¶è dependency ‡¶Ü‡¶õ‡ßá‡•§

Real-life:
CSE department delete ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∏‡ßá‡¶á ‡¶õ‡¶æ‡¶§‡ßç‡¶∞‡¶∞‡¶æ ‡¶ï‡ßÄ ‡¶π‡¶¨‡ßá?  
‚Üí Rules ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶¨‡ßá‡•§


=========================================================================================
# 8. Foreign Key ‡¶¶‡¶ø‡ßü‡ßá Relationship Types
=========================================================================================

1. One-to-One  
2. One-to-Many (‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá common)  
3. Many-to-Many (junction table ‡¶¶‡¶ø‡ßü‡ßá)  


-----------------------------------------------------------------------------------------
# Example:
-----------------------------------------------------------------------------------------

One-to-Many:
    One Department ‚Üí Many Students  
    FK: students.deptId ‚Üí departments.deptId

Many-to-Many:
    Students + Courses ‚Üí enrollment table  
    enrollment table ‚Üí ‡¶¶‡ßÅ‡¶ü‡¶ø FK:
        FK1 ‚Üí studentId  
        FK2 ‚Üí courseId  


=========================================================================================
# 9. Simple SQL Example (For Understanding)
=========================================================================================

CREATE TABLE departments (
  deptId INT PRIMARY KEY,
  deptName VARCHAR(50)
);

CREATE TABLE students (
  studentId INT PRIMARY KEY,
  fullName VARCHAR(100),
  deptId INT,
  FOREIGN KEY (deptId) REFERENCES departments(deptId)
);
*/

‡¶è‡¶á SQL ‡¶¨‡¶≤‡¶õ‡ßá:
‚úî students.deptId ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á departments.deptId ‡¶è‡¶∞ value match ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§


=========================================================================================
# 10. Summary (Easy Memorization)
=========================================================================================

Foreign Key =
    ‚úî References another table‚Äôs PK  
    ‚úî Data consistency maintain ‡¶ï‡¶∞‡ßá  
    ‚úî Relationship create ‡¶ï‡¶∞‡ßá  
    ‚úî Wrong / orphan data prevent ‡¶ï‡¶∞‡ßá  
    ‚úî Delete/Update rules control ‡¶ï‡¶∞‡¶§‡ßá ‡¶¶‡ßá‡ßü  

=========================================================================================
                                      THE END
=========================================================================================
