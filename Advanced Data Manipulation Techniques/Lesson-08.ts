=========================================================================================
                            SQL AGGREGATE FUNCTIONS 
=========================================================================================

=========================================================================================
# 0. ‡¶è‡¶á ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ï‡ßÄ ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßã?
=========================================================================================
‡¶è‡¶á ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßã‚Äî
1) Aggregate Function ‡¶ï‡ßÄ?
2) Aggregate Function ‡¶¨‡¶®‡¶æ‡¶Æ Scalar Function
3) PostgreSQL ‡¶è ‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ Aggregate Functions
4) GROUP BY ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá Aggregate Functions
5) HAVING ‡¶è‡¶∞ ‡¶≠‡ßÇ‡¶Æ‡¶ø‡¶ï‡¶æ
6) Real-world Query Examples
7) Common Mistakes
8) Best Practices

=========================================================================================
# 1. AGGREGATE FUNCTION ‡¶ï‡ßÄ?
=========================================================================================
Aggregate Function ‡¶π‡¶≤‡ßã‚Äî
üëâ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï row ‡¶®‡¶ø‡ßü‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá  
üëâ ‡¶è‡¶ï‡¶ü‡¶ø single summarized value return ‡¶ï‡¶∞‡ßá  

‡¶∏‡¶π‡¶ú ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü:
üëâ Many rows ‚Üí One result  

=========================================================================================
# 2. Scalar vs Aggregate Function
=========================================================================================

Feature              | Scalar Function              | Aggregate Function
---------------------|------------------------------|------------------------------
Input Rows           | ‡¶è‡¶ï row                       | ‡¶Ö‡¶®‡ßá‡¶ï row
Output               | ‡¶è‡¶ï row ‚Üí ‡¶è‡¶ï value             | ‡¶Ö‡¶®‡ßá‡¶ï row ‚Üí ‡¶è‡¶ï value
Use Case             | formatting, calculation      | summary, report
Example              | UPPER(name)                  | COUNT(name)

=========================================================================================
# 3. PostgreSQL ‡¶è ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® Aggregate Functions
=========================================================================================

Function        | ‡¶ï‡¶æ‡¶ú
----------------|-------------------------------------------
COUNT()         | row ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶ó‡¶£‡¶®‡¶æ
SUM()           | ‡¶Æ‡ßã‡¶ü ‡¶Ø‡ßã‡¶ó‡¶´‡¶≤
AVG()           | ‡¶ó‡ßú ‡¶Æ‡¶æ‡¶®
MIN()           | ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶Æ‡¶æ‡¶®
MAX()           | ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶Æ‡¶æ‡¶®

=========================================================================================
# 4. COUNT() Explained
=========================================================================================

-----------------------------------------------------------------------------------------
-- 4.1 Total row count
-----------------------------------------------------------------------------------------
SELECT COUNT(*)
FROM students;

-----------------------------------------------------------------------------------------
-- 4.2 NULL ‡¶¨‡¶æ‡¶¶ ‡¶¶‡¶ø‡ßü‡ßá count
-----------------------------------------------------------------------------------------
SELECT COUNT(phone)
FROM students;

-- COUNT(*) ‚Üí ‡¶∏‡¶¨ row
-- COUNT(column) ‚Üí NULL ‡¶¨‡¶æ‡¶¶ ‡¶¶‡¶ø‡ßü‡ßá

=========================================================================================
# 5. SUM() Explained
=========================================================================================

-----------------------------------------------------------------------------------------
-- ‡¶Æ‡ßã‡¶ü GPA ‡¶Ø‡ßã‡¶ó‡¶´‡¶≤ (numeric column)
-----------------------------------------------------------------------------------------
SELECT SUM(gpa)
FROM students;

-- SUM ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ numeric data ‡¶§‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá

=========================================================================================
# 6. AVG() Explained
=========================================================================================

-----------------------------------------------------------------------------------------
-- Average GPA
-----------------------------------------------------------------------------------------
SELECT AVG(gpa)
FROM students;

-- NULL value auto ignore ‡¶π‡ßü

=========================================================================================
# 7. MIN() & MAX() Explained
=========================================================================================

-----------------------------------------------------------------------------------------
-- ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® GPA
-----------------------------------------------------------------------------------------
SELECT MIN(gpa)
FROM students;

-----------------------------------------------------------------------------------------
-- ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö GPA
-----------------------------------------------------------------------------------------
SELECT MAX(gpa)
FROM students;

=========================================================================================
# 8. AGGREGATE FUNCTIONS with GROUP BY
=========================================================================================
GROUP BY ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‚Äî
üëâ category ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ summary ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá  

Syntax:
SELECT column, AGG_FUNC(column)
FROM table
GROUP BY column;

=========================================================================================
# 9. GROUP BY Examples
=========================================================================================

-----------------------------------------------------------------------------------------
-- 9.1 Department ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ student ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ
-----------------------------------------------------------------------------------------
SELECT department, COUNT(*)
FROM students
GROUP BY department;

-----------------------------------------------------------------------------------------
-- 9.2 Department ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ Average GPA
-----------------------------------------------------------------------------------------
SELECT department, AVG(gpa)
FROM students
GROUP BY department;

-----------------------------------------------------------------------------------------
-- 9.3 Multiple Aggregates
-----------------------------------------------------------------------------------------
SELECT department,
       COUNT(*) AS total_students,
       AVG(gpa) AS avg_gpa,
       MAX(gpa) AS max_gpa
FROM students
GROUP BY department;

=========================================================================================
# 10. HAVING ‡¶ï‡ßÄ?
=========================================================================================
HAVING ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‚Äî
üëâ GROUP BY ‡¶è‡¶∞ result filter ‡¶ï‡¶∞‡¶§‡ßá  
üëâ Aggregate condition ‡¶¨‡¶∏‡¶æ‡¶§‡ßá  

WHERE vs HAVING:
WHERE ‚Üí row filter ‡¶ï‡¶∞‡ßá (group ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá)
HAVING ‚Üí group filter ‡¶ï‡¶∞‡ßá (group ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞‡ßá)

=========================================================================================
# 11. HAVING Examples
=========================================================================================

-----------------------------------------------------------------------------------------
-- 11.1 Average GPA >= 3.50 ‡¶Ø‡ßá‡¶∏‡¶¨ department
-----------------------------------------------------------------------------------------
SELECT department, AVG(gpa)
FROM students
GROUP BY department
HAVING AVG(gpa) >= 3.50;

-----------------------------------------------------------------------------------------
-- 11.2 Student ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ 10 ‡¶è‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø
-----------------------------------------------------------------------------------------
SELECT department, COUNT(*)
FROM students
GROUP BY department
HAVING COUNT(*) > 10;

=========================================================================================
# 12. REAL-WORLD REPORT QUERIES
=========================================================================================

-----------------------------------------------------------------------------------------
-- 12.1 Total Orders & Revenue
-----------------------------------------------------------------------------------------
SELECT COUNT(*) AS total_orders,
       SUM(total_amount) AS total_revenue
FROM orders;

-----------------------------------------------------------------------------------------
-- 12.2 Monthly Sales Report
-----------------------------------------------------------------------------------------
SELECT EXTRACT(MONTH FROM order_date) AS month,
       SUM(total_amount)
FROM orders
GROUP BY month;

-----------------------------------------------------------------------------------------
-- 12.3 Top Performing Department
-----------------------------------------------------------------------------------------
SELECT department, AVG(gpa)
FROM students
GROUP BY department
ORDER BY AVG(gpa) DESC
LIMIT 1;

=========================================================================================
# 13. COMMON MISTAKES
=========================================================================================
1) GROUP BY ‡¶õ‡¶æ‡ßú‡¶æ non-aggregate column SELECT ‡¶ï‡¶∞‡¶æ  
2) WHERE ‡¶è‡¶∞ ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ‡ßü HAVING ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ  
3) NULL behavior ‡¶≠‡ßÅ‡¶≤ ‡¶¨‡ßã‡¶ù‡¶æ  
4) COUNT(column) ‡¶Ü‡¶∞ COUNT(*) ‡¶è‡¶ï ‡¶≠‡¶æ‡¶¨‡¶æ  

=========================================================================================
# 14. BEST PRACTICES
=========================================================================================
1) Summary report ‡¶è Aggregate Functions ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã  
2) Group condition ‚Üí HAVING  
3) Readability ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø alias ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã  
4) Large table ‡¶è proper indexing ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßã  

=========================================================================================
# 15. FINAL SUMMARY
=========================================================================================
‚úî Aggregate Functions ‚Üí summary ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá  
‚úî COUNT, SUM, AVG, MIN, MAX ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£  
‚úî GROUP BY ‡¶õ‡¶æ‡ßú‡¶æ meaningful aggregate ‡¶Ö‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨  
‚úî HAVING ‚Üí aggregate filter  

=========================================================================================
                                    THE END
=========================================================================================
