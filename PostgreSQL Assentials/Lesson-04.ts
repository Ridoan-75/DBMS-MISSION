=========================================================================================
                            DELETING DATA IN SQL 
=========================================================================================

=========================================================================================
# 0. DELETE ‡¶ï‡ßÄ?
=========================================================================================
DELETE ‡¶π‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶ø SQL command ‡¶Ø‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü ‚Äî
üëâ **table ‡¶•‡ßá‡¶ï‡ßá existing row (data) ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø**

‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£:
- DELETE table structure ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßá ‡¶®‡¶æ
- ‡¶∂‡ßÅ‡¶ß‡ßÅ row/data remove ‡¶ï‡¶∞‡ßá

=========================================================================================
# 1. DELETE ‡¶è‡¶∞ Basic Syntax
=========================================================================================
DELETE FROM table_name
WHERE condition;

‚ö†Ô∏è WARNING:
- WHERE ‡¶®‡¶æ ‡¶¶‡¶ø‡¶≤‡ßá ‚Üí ‡¶™‡ßÅ‡¶∞‡ßã table ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá ‚ùå

=========================================================================================
# 2. Delete Single Row
=========================================================================================
‡¶ß‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ï table: users

id | name   | email
---|--------|----------------
1  | Rafi   | rafi@gmail.com
2  | Sumi   | sumi@gmail.com
3  | Karim  | karim@gmail.com

-----------------------------------------------------------------------------------------
DELETE FROM users
WHERE id = 2;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- ‡¶∂‡ßÅ‡¶ß‡ßÅ id = 2 row delete ‡¶π‡¶¨‡ßá
- ‡¶¨‡¶æ‡¶ï‡¶ø data safe ‡¶•‡¶æ‡¶ï‡¶¨‡ßá

=========================================================================================
# 3. Delete Multiple Rows (Condition Based)
=========================================================================================
-----------------------------------------------------------------------------------------
DELETE FROM users
WHERE status = 'inactive';
-----------------------------------------------------------------------------------------

‡¶Æ‡¶æ‡¶®‡ßá:
- ‡¶Ø‡¶æ‡¶¶‡ßá‡¶∞ status inactive
- ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶¨ row delete ‡¶π‡¶¨‡ßá

=========================================================================================
# 4. DELETE Without WHERE (EXTREMELY DANGEROUS ‚ùó‚ùó)
=========================================================================================
-----------------------------------------------------------------------------------------
DELETE FROM users;
-----------------------------------------------------------------------------------------

‡¶ï‡¶ø ‡¶π‡¶¨‡ßá?
- users table ‡¶è‡¶∞ ‡¶∏‡¶¨ row delete ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá
- table ‡¶•‡¶æ‡¶ï‡¶¨‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ data ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶®‡¶æ

üëâ Production ‡¶è ‡¶è‡¶ü‡¶æ nightmare

=========================================================================================
# 5. DELETE With Comparison Operators
=========================================================================================
-----------------------------------------------------------------------------------------
DELETE FROM products
WHERE price < 100;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:
- Low-value / obsolete product remove

=========================================================================================
# 6. DELETE With LIMIT (PostgreSQL ‚ùå | MySQL ‚úî)
=========================================================================================
PostgreSQL ‡¶è DELETE + LIMIT directly support ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ

MySQL example:
-----------------------------------------------------------------------------------------
DELETE FROM logs
LIMIT 100;
-----------------------------------------------------------------------------------------

PostgreSQL workaround:
-----------------------------------------------------------------------------------------
DELETE FROM logs
WHERE id IN (
    SELECT id FROM logs
    ORDER BY created_at
    LIMIT 100
);
-----------------------------------------------------------------------------------------

=========================================================================================
# 7. DELETE With ORDER BY (PostgreSQL Workaround)
=========================================================================================
-----------------------------------------------------------------------------------------
DELETE FROM logs
WHERE id IN (
    SELECT id FROM logs
    ORDER BY created_at ASC
    LIMIT 50
);
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:
- Oldest data batch-wise delete

=========================================================================================
# 8. DELETE Using Subquery
=========================================================================================
-----------------------------------------------------------------------------------------
DELETE FROM orders
WHERE user_id IN (
    SELECT id FROM users WHERE is_banned = true
);
-----------------------------------------------------------------------------------------

‡¶Æ‡¶æ‡¶®‡ßá:
- banned user ‡¶è‡¶∞ ‡¶∏‡¶¨ order delete

=========================================================================================
# 9. DELETE With JOIN (PostgreSQL)
=========================================================================================
-----------------------------------------------------------------------------------------
DELETE FROM orders o
USING users u
WHERE o.user_id = u.id
AND u.status = 'inactive';
-----------------------------------------------------------------------------------------

‡¶´‡¶æ‡ßü‡¶¶‡¶æ:
- Related table condition ‡¶¶‡¶ø‡ßü‡ßá delete

=========================================================================================
# 10. DELETE With RETURNING (PostgreSQL Feature üî•)
=========================================================================================
-----------------------------------------------------------------------------------------
DELETE FROM users
WHERE id = 5
RETURNING id, name, email;
-----------------------------------------------------------------------------------------

‡¶´‡¶æ‡ßü‡¶¶‡¶æ:
- ‡¶ï‡ßã‡¶® row delete ‡¶π‡¶≤‡ßã
- ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡ßü

=========================================================================================
# 11. DELETE vs TRUNCATE
=========================================================================================
DELETE:
- WHERE ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü
- Row-by-row delete
- Transaction support ‡¶ï‡¶∞‡ßá
- Slower

TRUNCATE:
- WHERE ‡¶®‡ßá‡¶á
- ‡¶™‡ßÅ‡¶∞‡ßã table clear
- Faster
- Transaction limited

-----------------------------------------------------------------------------------------
TRUNCATE TABLE users;
-----------------------------------------------------------------------------------------

=========================================================================================
# 12. DELETE With Transaction (SAFE PRACTICE)
=========================================================================================
-----------------------------------------------------------------------------------------
BEGIN;

DELETE FROM users
WHERE role = 'test_user';

ROLLBACK; -- ‡¶≠‡ßÅ‡¶≤ ‡¶π‡¶≤‡ßá
-- COMMIT; -- ‡¶∏‡¶¨ ‡¶†‡¶ø‡¶ï ‡¶•‡¶æ‡¶ï‡¶≤‡ßá
-----------------------------------------------------------------------------------------

=========================================================================================
# 13. Soft Delete (Industry Practice ‚≠ê)
=========================================================================================
Real-world ‡¶è data ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø delete ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá ‚Äî
üëâ flag ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü

Example:
-----------------------------------------------------------------------------------------
UPDATE users
SET is_deleted = true
WHERE id = 10;
-----------------------------------------------------------------------------------------

Fetch time:
-----------------------------------------------------------------------------------------
SELECT * FROM users
WHERE is_deleted = false;
-----------------------------------------------------------------------------------------

‡¶´‡¶æ‡ßü‡¶¶‡¶æ:
‚úî Data recovery  
‚úî Audit trail  
‚úî Legal safety  

=========================================================================================
# 14. Common Mistakes
=========================================================================================
‚ùå WHERE ‡¶õ‡¶æ‡ßú‡¶æ DELETE  
‚ùå Production ‡¶è direct DELETE  
‚ùå Transaction ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ  
‚ùå Soft delete ignore ‡¶ï‡¶∞‡¶æ  

=========================================================================================
# 15. Real-Life Use Cases
=========================================================================================
‚úî Spam user remove  
‚úî Old logs cleanup  
‚úî Test data removal  
‚úî GDPR data deletion  
‚úî Archive preparation  

=========================================================================================
# 16. Best Practices (FINAL)
=========================================================================================
‚úî ‡¶Ü‡¶ó‡ßá SELECT ‡¶ï‡¶∞‡ßá verify ‡¶ï‡¶∞‡ßã  
‚úî Always use WHERE  
‚úî Use TRANSACTION  
‚úî Prefer Soft Delete  
‚úî Use RETURNING to verify  

=========================================================================================
# 17. Final Takeaway
=========================================================================================
- DELETE data remove ‡¶ï‡¶∞‡ßá, structure ‡¶®‡¶æ
- WHERE clause life saver
- PostgreSQL ‡¶è RETURNING powerful
- Production = Safety first
- DELETE is irreversible (unless backup)

=========================================================================================
                              THE NEXT
=========================================================================================
