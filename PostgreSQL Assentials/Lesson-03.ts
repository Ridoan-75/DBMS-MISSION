=========================================================================================
                             
UPDATING DATA IN SQL
=========================================================================================

=========================================================================================
# 0. UPDATE ‡¶ï‡ßÄ?
=========================================================================================
UPDATE ‡¶π‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶ø SQL command ‡¶Ø‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü ‚Äî
üëâ **table ‡¶è‡¶∞ existing data ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø**

‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£:
- UPDATE ‡¶®‡¶§‡ßÅ‡¶® row ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ
- UPDATE ‡¶™‡ßÅ‡¶∞‡ßã‡¶®‡ßã data modify ‡¶ï‡¶∞‡ßá

=========================================================================================
# 1. UPDATE ‡¶è‡¶∞ Basic Syntax
=========================================================================================
UPDATE table_name
SET column_name = value;

‚ö†Ô∏è WARNING:
- WHERE ‡¶®‡¶æ ‡¶¶‡¶ø‡¶≤‡ßá ‚Üí ‡¶™‡ßÅ‡¶∞‡ßã table update ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá ‚ùå

=========================================================================================
# 2. Single Column Update
=========================================================================================
‡¶ß‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ï table: users

id | name  | email
---|-------|----------------
1  | Rafi  | rafi@gmail.com
2  | Sumi  | sumi@gmail.com

-----------------------------------------------------------------------------------------
UPDATE users
SET email = 'rafi123@gmail.com'
WHERE id = 1;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- id = 1 row ‡¶è‡¶∞ email change ‡¶π‡¶¨‡ßá
- ‡¶Ö‡¶®‡ßç‡¶Ø row untouched ‡¶•‡¶æ‡¶ï‡¶¨‡ßá

=========================================================================================
# 3. Multiple Column Update
=========================================================================================
‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï column update ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü

-----------------------------------------------------------------------------------------
UPDATE users
SET
    name = 'Rafiqul Islam',
    email = 'rafiqul@gmail.com'
WHERE id = 1;
-----------------------------------------------------------------------------------------

=========================================================================================
# 4. UPDATE Without WHERE (DANGEROUS ‚ùó)
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE users
SET is_active = false;
-----------------------------------------------------------------------------------------

‡¶ï‡¶ø ‡¶π‡¶¨‡ßá?
- users table ‡¶è‡¶∞ ‡¶∏‡¶¨ row ‡¶§‡ßá is_active = false ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá

üëâ Production ‡¶è ‡¶è‡¶ü‡¶æ ‡¶Æ‡¶æ‡¶∞‡¶æ‡¶§‡ßç‡¶Æ‡¶ï ‡¶≠‡ßÅ‡¶≤

=========================================================================================
# 5. Conditional Update (WHERE Clause)
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE users
SET status = 'inactive'
WHERE last_login < '2024-01-01';
-----------------------------------------------------------------------------------------

‡¶Æ‡¶æ‡¶®‡ßá:
- ‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶Ö‡¶®‡ßá‡¶ï‡¶¶‡¶ø‡¶® login ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡¶á
- ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ status inactive ‡¶π‡¶¨‡ßá

=========================================================================================
# 6. UPDATE With Comparison Operators
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE products
SET price = price + 500
WHERE price < 5000;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- 5000 ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá price ‡¶π‡¶≤‡ßá
- price ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá 500 ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá

=========================================================================================
# 7. UPDATE With COALESCE (NULL Safe)
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE employees
SET bonus = COALESCE(bonus, 0) + 1000;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- bonus NULL ‡¶π‡¶≤‡ßá 0 ‡¶ß‡¶∞‡¶æ ‡¶π‡¶¨‡ßá
- ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ 1000 ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá

=========================================================================================
# 8. UPDATE With Arithmetic Operations
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE accounts
SET balance = balance - 1000
WHERE id = 5;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:
- Bank / wallet system
- Inventory management

=========================================================================================
# 9. UPDATE Using Another Column
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE students
SET total_marks = theory_marks + practical_marks;
-----------------------------------------------------------------------------------------

‡¶Æ‡¶æ‡¶®‡ßá:
- ‡¶¶‡ßÅ‡¶á‡¶ü‡¶æ column ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá
- total_marks update ‡¶ï‡¶∞‡¶æ

=========================================================================================
# 10. UPDATE With Subquery
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE products
SET price = price * 1.10
WHERE category_id IN (
    SELECT id FROM categories WHERE name = 'Electronics'
);
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- Electronics category ‡¶è‡¶∞ product
- price 10% ‡¶¨‡¶æ‡ßú‡¶æ‡¶®‡ßã

=========================================================================================
# 11. UPDATE With JOIN (PostgreSQL)
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE orders o
SET total_price = o.quantity * p.price
FROM products p
WHERE o.product_id = p.id;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:
- Related table ‡¶è‡¶∞ data ‡¶¶‡¶ø‡ßü‡ßá update

=========================================================================================
# 12. UPDATE With RETURNING (PostgreSQL Feature üî•)
=========================================================================================
-----------------------------------------------------------------------------------------
UPDATE users
SET status = 'active'
WHERE id = 2
RETURNING id, name, status;
-----------------------------------------------------------------------------------------

‡¶´‡¶æ‡ßü‡¶¶‡¶æ:
- Update ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá
- updated row ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡ßü

=========================================================================================
# 13. Safe UPDATE Best Practices
=========================================================================================
‚úî ‡¶Ü‡¶ó‡ßá SELECT ‡¶ö‡¶æ‡¶≤‡¶æ‡¶ì  
‚úî WHERE condition verify ‡¶ï‡¶∞‡ßã  
‚úî Transaction ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã  
‚úî Production ‡¶è LIMIT ‡¶∏‡¶π UPDATE ‡¶ï‡¶∞‡ßã  

=========================================================================================
# 14. UPDATE With Transaction (Safe Way)
=========================================================================================
-----------------------------------------------------------------------------------------
BEGIN;

UPDATE users
SET role = 'admin'
WHERE id = 10;

ROLLBACK; -- mistake ‡¶π‡¶≤‡ßá
-- COMMIT; -- ‡¶∏‡¶¨ ‡¶†‡¶ø‡¶ï ‡¶•‡¶æ‡¶ï‡¶≤‡ßá
-----------------------------------------------------------------------------------------

=========================================================================================
# 15. Common Mistakes
=========================================================================================
‚ùå WHERE ‡¶õ‡¶æ‡ßú‡¶æ UPDATE  
‚ùå Wrong condition  
‚ùå NULL handle ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ  
‚ùå Transaction ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ  

=========================================================================================
# 16. Real-Life Use Cases
=========================================================================================
‚úî User profile update  
‚úî Price adjustment  
‚úî Status change  
‚úî Inventory update  
‚úî Salary increment  

=========================================================================================
# 17. Final Takeaway
=========================================================================================
- UPDATE existing data ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßá
- WHERE clause ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£
- Arithmetic + COALESCE ‡¶ñ‡ßÅ‡¶¨ common
- PostgreSQL ‡¶è RETURNING ‡¶ñ‡ßÅ‡¶¨ powerful
- Safe update = Production survival

=========================================================================================
                                     THE END
=========================================================================================
