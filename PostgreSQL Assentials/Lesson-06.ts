=========================================================================================
                            GROUP BY WITH HAVING 
=========================================================================================

=========================================================================================
# 0. HAVING ‡¶ï‡ßÄ?
=========================================================================================
HAVING ‡¶π‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶ø SQL clause ‡¶Ø‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü ‚Äî
üëâ **GROUP BY ‡¶¶‡¶ø‡ßü‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶ì‡ßü‡¶æ group ‡¶ó‡ßÅ‡¶≤‡ßã‡¶ï‡ßá filter ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø**

‡¶∏‡¶π‡¶ú ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü:
- WHERE ‚Üí row filter ‡¶ï‡¶∞‡ßá
- HAVING ‚Üí group filter ‡¶ï‡¶∞‡ßá

=========================================================================================
# 1. ‡¶ï‡ßá‡¶® HAVING ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?
=========================================================================================
WHERE clause Aggregate Function ‡¶¨‡ßÅ‡¶ù‡ßá ‡¶®‡¶æ ‚ùå

‚ùå ‡¶≠‡ßÅ‡¶≤:
-----------------------------------------------------------------------------------------
SELECT product, SUM(amount)
FROM sales
WHERE SUM(amount) > 5000
GROUP BY product;
-----------------------------------------------------------------------------------------

‡¶ï‡¶æ‡¶∞‡¶£:
- WHERE ‡¶Ü‡¶ó‡ßá execute ‡¶π‡ßü
- ‡¶§‡¶ñ‡¶® SUM(amount) ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü ‡¶®‡¶æ‡¶á

‚úî ‡¶∏‡¶†‡¶ø‡¶ï:
-----------------------------------------------------------------------------------------
SELECT product, SUM(amount)
FROM sales
GROUP BY product
HAVING SUM(amount) > 5000;
-----------------------------------------------------------------------------------------

=========================================================================================
# 2. GROUP BY + HAVING ‡¶è‡¶∞ Basic Syntax
=========================================================================================
SELECT
    column_name,
    AGGREGATE_FUNCTION(column_name)
FROM table_name
GROUP BY column_name
HAVING condition_on_aggregate;

=========================================================================================
# 3. Basic Example (SUM + HAVING)
=========================================================================================
‡¶ß‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ï table: sales

id | product   | amount
---|-----------|--------
1  | Laptop    | 80000
2  | Mouse     | 800
3  | Laptop    | 75000
4  | Mouse     | 900
5  | Keyboard  | 1500

-----------------------------------------------------------------------------------------
SELECT
    product,
    SUM(amount) AS total_sales
FROM sales
GROUP BY product
HAVING SUM(amount) > 2000;
-----------------------------------------------------------------------------------------

Result:
-----------------------------------------------------------------------------------------
product | total_sales
--------|-------------
Laptop  | 155000
Mouse   | 1700 ‚ùå (‡¶¨‡¶æ‡¶¶)
Keyboard| 1500 ‚ùå (‡¶¨‡¶æ‡¶¶)
-----------------------------------------------------------------------------------------

=========================================================================================
# 4. HAVING With COUNT()
=========================================================================================
-----------------------------------------------------------------------------------------
SELECT
    product,
    COUNT(*) AS total_orders
FROM sales
GROUP BY product
HAVING COUNT(*) >= 2;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- ‡¶Ø‡ßá‡¶∏‡¶¨ product ‡¶Ö‡¶®‡ßç‡¶§‡¶§ 2 ‡¶¨‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá
- ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡ßá‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá

=========================================================================================
# 5. HAVING With AVG()
=========================================================================================
-----------------------------------------------------------------------------------------
SELECT
    department,
    AVG(salary) AS avg_salary
FROM employees
GROUP BY department
HAVING AVG(salary) > 50000;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:
- High paying departments ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ

=========================================================================================
# 6. HAVING With MIN() & MAX()
=========================================================================================
-----------------------------------------------------------------------------------------
SELECT
    category,
    MIN(price) AS min_price,
    MAX(price) AS max_price
FROM products
GROUP BY category
HAVING MAX(price) > 10000;
-----------------------------------------------------------------------------------------

=========================================================================================
# 7. WHERE + GROUP BY + HAVING Together
=========================================================================================
IMPORTANT ORDER ‚ùó

-----------------------------------------------------------------------------------------
SELECT
    product,
    SUM(amount) AS total_sales
FROM sales
WHERE amount > 1000        -- row filter
GROUP BY product
HAVING SUM(amount) > 5000; -- group filter
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá low amount row ‡¶¨‡¶æ‡¶¶
- ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ group
- ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶¨‡ßú group select

=========================================================================================
# 8. HAVING With Multiple Conditions
=========================================================================================
-----------------------------------------------------------------------------------------
SELECT
    product,
    COUNT(*) AS total_orders,
    SUM(amount) AS total_sales
FROM sales
GROUP BY product
HAVING COUNT(*) >= 2
   AND SUM(amount) > 10000;
-----------------------------------------------------------------------------------------

=========================================================================================
# 9. HAVING Without GROUP BY?
=========================================================================================
Technically possible ‚úî

-----------------------------------------------------------------------------------------
SELECT
    COUNT(*) AS total_orders
FROM sales
HAVING COUNT(*) > 100;
-----------------------------------------------------------------------------------------

‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:
- ‡¶™‡ßÅ‡¶∞‡ßã table = ‡¶è‡¶ï‡¶ü‡¶æ‡¶á group
- HAVING ‡¶∏‡ßá‡¶á group filter ‡¶ï‡¶∞‡ßá

‚ö†Ô∏è Rare case ‚Äî interview ‡¶è ‡¶Ü‡¶∏‡ßá

=========================================================================================
# 10. Execution Order (VERY IMPORTANT üî•)
=========================================================================================
SQL execution flow:

1Ô∏è‚É£ FROM  
2Ô∏è‚É£ WHERE  
3Ô∏è‚É£ GROUP BY  
4Ô∏è‚É£ HAVING  
5Ô∏è‚É£ SELECT  
6Ô∏è‚É£ ORDER BY  
7Ô∏è‚É£ LIMIT  

=========================================================================================
# 11. Common Mistakes
=========================================================================================
‚ùå HAVING ‡¶è non-aggregate column condition  
‚ùå WHERE ‡¶¶‡¶ø‡ßü‡ßá aggregate filter ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ  
‚ùå HAVING unnecessarily ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞  
‚ùå WHERE ‡¶¨‡¶æ‡¶¶ ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶¨ HAVING ‡¶è ‡¶≤‡ßá‡¶ñ‡¶æ  

=========================================================================================
# 12. Best Practices
=========================================================================================
‚úî Row filter ‚Üí WHERE  
‚úî Group filter ‚Üí HAVING  
‚úî Both combine ‡¶ï‡¶∞‡¶≤‡ßá performance ‡¶≠‡¶æ‡¶≤‡ßã  
‚úî Clean & readable query ‡¶≤‡ßá‡¶ñ‡ßã  

=========================================================================================
# 13. Real-Life Use Cases
=========================================================================================
‚úî Top selling products  
‚úî High revenue customers  
‚úî Popular categories  
‚úî High salary departments  
‚úî Analytics reports  

=========================================================================================
# 14. HAVING vs WHERE (Quick Recap)
=========================================================================================
WHERE:
- Row level
- Aggregate ‚ùå

HAVING:
- Group level
- Aggregate ‚úî

=========================================================================================
# 15. Final Takeaway
=========================================================================================
- HAVING ‡¶õ‡¶æ‡ßú‡¶æ GROUP BY incomplete
- WHERE ‚â† HAVING
- Aggregate filter = HAVING
- Reporting query ‡¶§‡ßá core concept

=========================================================================================
                                THE END
=========================================================================================
