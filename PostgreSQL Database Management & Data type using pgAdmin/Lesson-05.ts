=========================================================================================
                        COLUMN CONSTRAINTS IN DATABASE
=========================================================================================

=========================================================================================
# 0. CONSTRAINT ‡¶ï‡ßÄ?
=========================================================================================
Constraint ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Database ‡¶è‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ / restriction

Column Constraint ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü ‚Äî
‚Ä¢ ‡¶≠‡ßÅ‡¶≤ Data Insert ‡¶†‡ßá‡¶ï‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø  
‚Ä¢ Data Integrity ‡¶¨‡¶ú‡¶æ‡ßü ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø  
‚Ä¢ Real-world rules enforce ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø  

=========================================================================================
# 1. ‡¶ï‡ßá‡¶® COLUMN CONSTRAINT ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?
=========================================================================================
Constraint ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‚Äî
‚Ä¢ Duplicate Data ‡¶¢‡ßÅ‡¶ï‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá  
‚Ä¢ Invalid value ‡¶¢‡ßÅ‡¶ï‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá  
‚Ä¢ Important field ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ (NULL) ‡¶•‡¶æ‡¶ï‡¶¨‡ßá  

üëâ Constraint = Database Level Security

=========================================================================================
# 2. PRIMARY KEY
=========================================================================================
PRIMARY KEY ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Column ‡¶ü‡¶ø Unique + NOT NULL

Features:
‚Ä¢ Duplicate ‡¶ö‡¶≤‡¶¨‡ßá ‡¶®‡¶æ  
‚Ä¢ NULL ‡¶ö‡¶≤‡¶¨‡ßá ‡¶®‡¶æ  
‚Ä¢ Table ‡¶è ‡¶è‡¶ï‡¶ü‡¶æ‡¶á Primary Key ‡¶•‡¶æ‡¶ï‡ßá  

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50)
);

=========================================================================================
# 3. UNIQUE
=========================================================================================
UNIQUE ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Column ‡¶è‡¶∞ value Unique ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá

Allowed:
‚Ä¢ NULL (‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï NULL ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá)

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE users (
    email VARCHAR(100) UNIQUE
);

=========================================================================================
# 4. NOT NULL
=========================================================================================
NOT NULL ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Column ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE users (
    name VARCHAR(50) NOT NULL
);

=========================================================================================
# 5. DEFAULT
=========================================================================================
DEFAULT ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Value ‡¶®‡¶æ ‡¶¶‡¶ø‡¶≤‡ßá ‡¶®‡¶ø‡¶ú‡ßá ‡¶®‡¶ø‡¶ú‡ßá value ‡¶¨‡¶∏‡¶¨‡ßá

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE users (
    is_active BOOLEAN DEFAULT TRUE
);

=========================================================================================
# 6. CHECK
=========================================================================================
CHECK ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Condition true ‡¶®‡¶æ ‡¶π‡¶≤‡ßá insert ‡¶π‡¶¨‡ßá ‡¶®‡¶æ

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE users (
    age INTEGER CHECK (age >= 18)
);

=========================================================================================
# 7. FOREIGN KEY
=========================================================================================
FOREIGN KEY ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ ‡¶è‡¶ï Table ‡¶è‡¶∞ Column ‡¶Ö‡¶®‡ßç‡¶Ø Table ‡¶è‡¶∞ Primary Key ‡¶ï‡ßá reference ‡¶ï‡¶∞‡ßá

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE orders (
    user_id INTEGER REFERENCES users(id)
);

=========================================================================================
# 8. FOREIGN KEY with ON DELETE
=========================================================================================
ON DELETE CASCADE ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Parent delete ‡¶π‡¶≤‡ßá child auto delete

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE orders (
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE
);

=========================================================================================
# 9. FOREIGN KEY with ON UPDATE
=========================================================================================
ON UPDATE CASCADE ‡¶Æ‡¶æ‡¶®‡ßá ‚Äî
üëâ Parent update ‡¶π‡¶≤‡ßá child update ‡¶π‡¶¨‡ßá

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE orders (
    user_id INTEGER REFERENCES users(id) ON UPDATE CASCADE
);

=========================================================================================
# 10. COMPOSITE PRIMARY KEY
=========================================================================================
‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï Column ‡¶Æ‡¶ø‡¶≤‡ßá Primary Key

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE enrollments (
    student_id INTEGER,
    course_id INTEGER,
    PRIMARY KEY (student_id, course_id)
);

=========================================================================================
# 11. CONSTRAINT ‡¶®‡¶æ‡¶Æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ (Good Practice)
=========================================================================================
Constraint ‡¶è‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶≤‡ßá ‚Äî
‚Ä¢ Error ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶∏‡¶π‡¶ú  
‚Ä¢ Debug ‡¶ï‡¶∞‡¶æ ‡¶∏‡¶π‡¶ú  

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE users (
    email VARCHAR(100),
    CONSTRAINT unique_email UNIQUE (email)
);

=========================================================================================
# 12. COLUMN vs TABLE CONSTRAINT
=========================================================================================
Column Constraint:
‚Ä¢ Column ‡¶è‡¶∞ ‡¶™‡¶æ‡¶∂‡ßá ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶π‡ßü

Table Constraint:
‚Ä¢ ‡¶®‡¶ø‡¶ö‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßá ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶π‡ßü

-----------------------------------------------------------------------------------------
Example:
-----------------------------------------------------------------------------------------
CREATE TABLE users (
    id INTEGER,
    email VARCHAR(100),
    PRIMARY KEY (id),
    UNIQUE (email)
);

=========================================================================================
# 13. Existing Table ‡¶è Constraint Add ‡¶ï‡¶∞‡¶æ
=========================================================================================
ALTER TABLE users
ADD CONSTRAINT unique_email UNIQUE (email);

=========================================================================================
# 14. Constraint Drop ‡¶ï‡¶∞‡¶æ
=========================================================================================
ALTER TABLE users
DROP CONSTRAINT unique_email;

=========================================================================================
# 15. Common Beginner Mistakes
=========================================================================================
‚ùå Primary Key ‡¶®‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ  
‚ùå Email ‡¶è UNIQUE ‡¶®‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ  
‚ùå Age ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø CHECK ‡¶®‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ  
‚ùå Foreign Key ‡¶®‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ  

=========================================================================================
# 16. Real Project Usage
=========================================================================================
users table:
‚Ä¢ id ‚Üí PRIMARY KEY  
‚Ä¢ email ‚Üí UNIQUE + NOT NULL  
‚Ä¢ age ‚Üí CHECK  
‚Ä¢ is_active ‚Üí DEFAULT  

orders table:
‚Ä¢ user_id ‚Üí FOREIGN KEY  

=========================================================================================
# 17. Best Practices
=========================================================================================
‚úî Always Primary Key ‡¶¶‡¶æ‡¶ì  
‚úî Important field ‡¶è NOT NULL  
‚úî Email/Username ‡¶è UNIQUE  
‚úî Relationship ‡¶è FOREIGN KEY  

=========================================================================================
# 18. QUICK REVISION
=========================================================================================
PRIMARY KEY ‚Üí Unique + Not Null  
UNIQUE      ‚Üí Duplicate ‡¶®‡¶æ  
NOT NULL    ‚Üí ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶®‡¶æ  
DEFAULT     ‚Üí Auto value  
CHECK       ‚Üí Condition  
FOREIGN KEY ‚Üí Relation  

=========================================================================================
                      END OF COLUMN CONSTRAINTS
=========================================================================================
